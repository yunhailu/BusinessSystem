<template>
    <!--<tabs></tabs>-->
    <!--<span>Theme</span>-->
    <span class="panel-title">{{title}}</span>
    <div class="theme-word">
        <div class="theme-word-chart" v-echarts="themeWordOption" :loading="themeWordLoading"  theme="infographic" :click="clickAction"></div>
        <div class="theme-word-ranking">
            <dl class="list up-list">
                <dt class="list-title">UP</dt>
                <dd v-for="item in upList" class="list-item up-list-item">
                    <div :id="item.id">
                        <i class="fa fa-level-up"></i>
                        <span class="list-item-con">{{item.rate}} - {{item.name}}</span>
                    </div>
                </dd>
            </dl>
            <dl class="list down-list">
                <dt class="list-title">DOWN</dt>
                <dd v-for="item in downList" class="list-item down-list-item">
                    <div :id="item.id">
                        <i class="fa fa-level-down"></i>
                        <span class="list-item-con">{{item.rate}} - {{item.name}}</span>
                    </div>
                </dd>
            </dl>
        </div>
    </div>
    <div class="theme-chart">
        <div class="chart"  v-echarts="themeScatterOption" :loading="themeScatterLoading"  theme="macarons"></div>
        <div class="chart"  v-echarts="themeLineOption" :loading="themeLineLoading"  theme="macarons"></div>
        <div class="chart best"  v-echarts="themeBestOption" :loading="themeBestLoading"  theme="macarons"></div>
    </div>
</template>
<style lang="less" scoped>
    @import "Theme.less";
</style>
<script type="text/ecmascript-6">
    import _ from 'underscore';
    import Tabs from '../../Common/Tabs/Tabs.vue';
    import Local from "../../../local/local";
    import { Chart, Pie } from '../../../config/config';
    import { themeScatterData } from '../../../config/tmpData';
    import * as Api from '../../../widgets/Api';

    export default{
        props: ['title', 'data'],
        data(){
            const words = Local().theme;
            return{
                words,
                themeWordLoading: true,
                themeWordOption: {
                    tooltip: {},
                    series: {
                        //grid: {x:0, x2:0},
                        type: 'wordCloud',
                        gridSize: 14,
                        sizeRange: [12, 50],
                        rotationRange: [-90, 90],
                        shape: 'circle',
                        width: '95%',
                        height: '90%',
                        textPadding: 6,
                        textStyle: {
                            normal: {
                                color: function () {
                                    return 'rgb(' + [
                                                Math.round(Math.random() * 160 + 50),
                                                Math.round(Math.random() * 160 + 50),
                                                Math.round(Math.random() * 160 + 50)
                                            ].join(',') + ')';
                                }
                            },
                            emphasis: {
                                shadowBlur: 10,
                                shadowColor: '#333'
                            }
                        },
                        //data: [{"name":"visualMap","value":148.99328843944616},{"name":"continuous","value":101.42977866484773},{"name":"contoller","value":24.899799195977465},{"name":"series","value":523.8988451981928},{"name":"gauge","value":110.95494581135173},{"name":"detail","value":34.72751070837067},{"name":"piecewise","value":69.8927750200262},{"name":"textStyle","value":179.70531433432902},{"name":"markPoint","value":136.28646301082145},{"name":"pie","value":197.30433345469126},{"name":"roseType","value":31.12876483254676},{"name":"label","value":193.6930561481232},{"name":"emphasis","value":109.78615577567146},{"name":"yAxis","value":239.37209528263733},{"name":"name","value":124.16923934694937},{"name":"type","value":151.34397906755325},{"name":"gridIndex","value":71.73562573784382},{"name":"normal","value":222.4567373670665},{"name":"itemStyle","value":183.9483623194292},{"name":"min","value":67.08203932499369},{"name":"silent","value":75.78918128598566},{"name":"animation","value":69.57010852370435},{"name":"offsetCenter","value":15.231546211727817},{"name":"inverse","value":60.876925020897694},{"name":"borderColor","value":69.3685807840985},{"name":"markLine","value":128.7555824032496},{"name":"line","value":277.43467699622556},{"name":"radiusAxis","value":81.87795796183488},{"name":"radar","value":126.34872377669669},{"name":"data","value":246.33107802305418},{"name":"dataZoom","value":156.03525242713584},{"name":"tooltip","value":208.37466256721328},{"name":"toolbox","value":158.8143570336133},{"name":"geo","value":130.01538370516005},{"name":"parallelAxis","value":63.474404290233394},{"name":"parallel","value":72.9314746868593},{"name":"max","value":58.249463516842795},{"name":"bar","value":207.52349264601347},{"name":"heatmap","value":55.767373974394744},{"name":"map","value":142.42541907960108},{"name":"animationDuration","value":58.52349955359813},{"name":"animationDelay","value":49.3051721424842},{"name":"splitNumber","value":71.93747284969079},{"name":"axisLine","value":112.86274850454423},{"name":"lineStyle","value":140.00357138301865},{"name":"splitLine","value":84.45708969648433},{"name":"axisTick","value":93.9734004918413},{"name":"axisLabel","value":132.34802605252563},{"name":"pointer","value":24.289915602982237},{"name":"color","value":153.05554547287727},{"name":"title","value":196.2065238466856},{"name":"formatter","value":123.3450444890268},{"name":"slider","value":85.06468127254695},{"name":"legend","value":257.9030825717289},{"name":"grid","value":168.86681142249356},{"name":"smooth","value":35.98610843089316},{"name":"smoothMonotone","value":26.38181191654584},{"name":"sampling","value":27.51363298439521},{"name":"feature","value":113.20335684068738},{"name":"saveAsImage","value":51.146847410177685},{"name":"polar","value":79.24014134263012},{"name":"calculable","value":29.647934160747187},{"name":"backgroundColor","value":97.05153270299239},{"name":"excludeComponents","value":11.40175425099138},{"name":"show","value":143.59665734271115},{"name":"text","value":50.91168824543142},{"name":"icon","value":52.744667976962376},{"name":"dimension","value":21.863211109075447},{"name":"inRange","value":32.55764119219941},{"name":"animationEasing","value":54.616847217685496},{"name":"animationDurationUpdate","value":47.52893855326458},{"name":"animationDelayUpdate","value":47.286361670147556},{"name":"animationEasingUpdate","value":47.042533945356304},{"name":"xAxis","value":299.096974240797},{"name":"angleAxis","value":73.95268757793728},{"name":"showTitle","value":22},{"name":"dataView","value":52.478567053607705},{"name":"restore","value":30.528675044947494},{"name":"timeline","value":100.5186549850325},{"name":"range","value":21.840329667841555},{"name":"value","value":75.7099729229908},{"name":"precision","value":29.631064780058107},{"name":"target","value":37.8549864614954},{"name":"zlevel","value":73.21885003194191},{"name":"symbol","value":93.3702308018996},{"name":"interval","value":89.24124606929242},{"name":"symbolSize","value":72.80109889280519},{"name":"showSymbol","value":35.31288716601915},{"name":"inside","value":94.40868604106298},{"name":"xAxisIndex","value":61.99193495931547},{"name":"orient","value":64.8459713474939},{"name":"boundaryGap","value":71.22499561249548},{"name":"nameGap","value":69.9714227381436},{"name":"zoomLock","value":23.895606290697042},{"name":"hoverAnimation","value":48.03123983409131},{"name":"legendHoverLink","value":59.60704656330491},{"name":"stack","value":53.91660226683428},{"name":"throttle","value":21.587033144922902},{"name":"connectNulls","value":29.949958263743873},{"name":"clipOverflow","value":28.74021572639983},{"name":"startValue","value":23.473389188611005},{"name":"minInterval","value":57.37595315112421},{"name":"opacity","value":55.65069631190611},{"name":"splitArea","value":69.10137480542626},{"name":"filterMode","value":25.199206336708304},{"name":"end","value":20.223748416156685},{"name":"left","value":80.46738469715541},{"name":"funnel","value":47.30750469005948},{"name":"lines","value":80.01874780324921},{"name":"baseline","value":20.760539492026695},{"name":"align","value":51.068581339214816},{"name":"coord","value":29.949958263743873},{"name":"nameTextStyle","value":86.46964785403026},{"name":"width","value":65.86349520030045},{"name":"shadowBlur","value":67.02984409947557},{"name":"effect","value":30.479501308256342},{"name":"period","value":15},{"name":"areaColor","value":25.11971337416094},{"name":"borderWidth","value":60.44832503882965},{"name":"nameLocation","value":66.46803743153546},{"name":"position","value":108.27280360275151},{"name":"containLabel","value":41.24318125460256},{"name":"scatter","value":103.52777405121778},{"name":"areaStyle","value":72.86974680894672},{"name":"scale","value":62.120849961989414},{"name":"pieces","value":20.346989949375804},{"name":"categories","value":31.622776601683793},{"name":"selectedMode","value":61.84658438426491},{"name":"itemSymbol","value":16.522711641858304},{"name":"effectScatter","value":84.53993139339539},{"name":"fontStyle","value":58.1033561853358},{"name":"fontSize","value":58.18934610390462},{"name":"margin","value":32.155870381627054},{"name":"iconStyle","value":47.50789408087881},{"name":"link","value":36.959437225152655},{"name":"axisPointer","value":72.42237223399962},{"name":"showDelay","value":29.93325909419153},{"name":"graph","value":148.97650821522163},{"name":"subtext","value":37.97367509209505},{"name":"selected","value":53.67494760127857},{"name":"barCategoryGap","value":28.75760768909681},{"name":"barGap","value":33.075670817082454},{"name":"barWidth","value":39},{"name":"coordinateSystem","value":60.18305409332431},{"name":"barBorderRadius","value":16.852299546352718},{"name":"z","value":63.35613624582863},{"name":"polarIndex","value":38.157568056677825},{"name":"shadowOffsetX","value":55.190578906186516},{"name":"shadowColor","value":61.40846847137616},{"name":"shadowOffsetY","value":49.749371855331},{"name":"height","value":44.58699361921591},{"name":"barMinHeight","value":23.979157616563597},{"name":"lang","value":11.445523142259598},{"name":"symbolRotate","value":52.459508194416},{"name":"symbolOffset","value":50.48762224545735},{"name":"showAllSymbol","value":30.692018506445613},{"name":"transitionDuration","value":31.51190251317746},{"name":"bottom","value":61.02458520956943},{"name":"fillerColor","value":15.132745950421556},{"name":"nameMap","value":35.34119409414458},{"name":"barMaxWidth","value":27.331300737432898},{"name":"radius","value":45.858477951192405},{"name":"center","value":49.24428900898052},{"name":"magicType","value":57.23635208501674},{"name":"labelPrecision","value":15.748015748023622},{"name":"option","value":25.573423705088842},{"name":"seriesIndex","value":30.577769702841312},{"name":"controlPosition","value":11},{"name":"itemGap","value":56.462376853972415},{"name":"padding","value":59},{"name":"shadowStyle","value":18.627936010197157},{"name":"boxplot","value":37.33630940518894},{"name":"labelFormatter","value":16.24807680927192},{"name":"realtime","value":25.11971337416094},{"name":"dataBackgroundColor","value":15.459624833740307},{"name":"showDetail","value":15.716233645501712},{"name":"showDataShadow","value":14.730919862656235},{"name":"x","value":26.153393661244042},{"name":"valueDim","value":22.338307903688676},{"name":"onZero","value":30.512292604784715},{"name":"right","value":57.05260730238365},{"name":"clockwise","value":32.17141588429082},{"name":"itemWidth","value":41.617304093369626},{"name":"trigger","value":61.96773353931867},{"name":"axis","value":19.467922333931785},{"name":"selectedOffset","value":25.88435821108957},{"name":"startAngle","value":35.958309192730404},{"name":"minAngle","value":24.289915602982237},{"name":"top","value":68.09552114493287},{"name":"avoidLabelOverlap","value":29.49576240750525},{"name":"labelLine","value":61.5223536610881},{"name":"sankey","value":54.15717865620402},{"name":"endAngle","value":14.594519519326424},{"name":"start","value":27.910571473905726},{"name":"roam","value":41.689327171351664},{"name":"fontWeight","value":53.178943201233324},{"name":"fontFamily","value":49.8998997994986},{"name":"subtextStyle","value":45.45327270945405},{"name":"indicator","value":29.206163733020468},{"name":"sublink","value":26.60826939130014},{"name":"zoom","value":32.218007387174026},{"name":"subtarget","value":25.67099530598687},{"name":"length","value":32.55764119219941},{"name":"itemSize","value":22.47220505424423},{"name":"controlStyle","value":21.2602916254693},{"name":"yAxisIndex","value":50.28916384272063},{"name":"edgeLabel","value":34.46737587922817},{"name":"radiusAxisIndex","value":18.81488772222678},{"name":"scaleLimit","value":36.235341863986875},{"name":"geoIndex","value":23.130067012440755},{"name":"regions","value":43.497126341863094},{"name":"itemHeight","value":35.91656999213594},{"name":"nodes","value":25.37715508089904},{"name":"candlestick","value":56.2672195865408},{"name":"crossStyle","value":21.587033144922902},{"name":"edges","value":19.209372712298546},{"name":"links","value":57.245087125446844},{"name":"layout","value":29.086079144497972},{"name":"barBorderColor","value":26.851443164195103},{"name":"barBorderWidth","value":22.315913604421397},{"name":"treemap","value":62.16912416947821},{"name":"y","value":19.157244060668017},{"name":"valueIndex","value":26.5329983228432},{"name":"showLegendSymbol","value":21.95449840010015},{"name":"mapValueCalculation","value":22.181073012818835},{"name":"optionToContent","value":16.24807680927192},{"name":"handleColor","value":13.674794331177344},{"name":"handleSize","value":16.46207763315433},{"name":"showContent","value":43.04648650006177},{"name":"angleAxisIndex","value":20.149441679609886},{"name":"endValue","value":18.083141320025124},{"name":"triggerOn","value":41.47288270665544},{"name":"contentToOption","value":13},{"name":"buttonColor","value":8.426149773176359},{"name":"rotate","value":33.823069050575526},{"name":"hoverLink","value":18.303005217723125},{"name":"outOfRange","value":22.15851980616034},{"name":"textareaColor","value":7.615773105863909},{"name":"textareaBorderColor","value":7.615773105863909},{"name":"textColor","value":7.745966692414834},{"name":"buttonTextColor","value":8.12403840463596},{"name":"category","value":18.33030277982336},{"name":"hideDelay","value":28.035691537752374},{"name":"alwaysShowContent","value":35.59494346111537},{"name":"extraCssText","value":30.01666203960727},{"name":"effectType","value":16.64331697709324},{"name":"force","value":42.661458015403085},{"name":"rippleEffect","value":26.888659319497503},{"name":"edgeSymbolSize","value":18.138357147217054},{"name":"showEffectOn","value":16.46207763315433},{"name":"gravity","value":14.106735979665885},{"name":"edgeLength","value":13.892443989449804},{"name":"layoutAnimation","value":12.328828005937952},{"name":"length2","value":13},{"name":"enterable","value":30.93541659651604},{"name":"dim","value":9.1104335791443},{"name":"readOnly","value":11.958260743101398},{"name":"levels","value":21.071307505705477},{"name":"textGap","value":16},{"name":"pixelRatio","value":9.16515138991168},{"name":"nodeScaleRatio","value":15.231546211727817},{"name":"draggable","value":15.7797338380595},{"name":"brushType","value":12.569805089976535},{"name":"radarIndex","value":12.328828005937952},{"name":"large","value":13.490737563232042},{"name":"edgeSymbol","value":25.98076211353316},{"name":"largeThreshold","value":11.489125293076057},{"name":"leafDepth","value":8.54400374531753},{"name":"childrenVisibleMin","value":8.54400374531753},{"name":"minSize","value":5.916079783099616},{"name":"maxSize","value":5.916079783099616},{"name":"sort","value":9.486832980505138},{"name":"funnelAlign","value":7.810249675906654},{"name":"source","value":18.33030277982336},{"name":"nodeClick","value":14.142135623730951},{"name":"curveness","value":18.708286933869708},{"name":"areaSelectStyle","value":10.198039027185569},{"name":"parallelIndex","value":7.211102550927978},{"name":"initLayout","value":18.947295321496416},{"name":"trailLength","value":10.770329614269007},{"name":"boxWidth","value":4.47213595499958},{"name":"back","value":7.280109889280518},{"name":"rewind","value":10.488088481701515},{"name":"zoomToNodeRatio","value":8.94427190999916},{"name":"squareRatio","value":7.745966692414834},{"name":"parallelAxisDefault","value":18.920887928424502},{"name":"checkpointStyle","value":20.97617696340303},{"name":"nodeWidth","value":7},{"name":"color0","value":7.874007874011811},{"name":"layoutIterations","value":7.483314773547883},{"name":"nodeGap","value":7.3484692283495345},{"name":"color(Array","value":8.717797887081348},{"name":"<string>)","value":8.717797887081348},{"name":"repulsion","value":16.61324772583615},{"name":"tiled","value":10.246950765959598},{"name":"currentIndex","value":12.041594578792296},{"name":"axisType","value":15.066519173319364},{"name":"loop","value":9.848857801796104},{"name":"playInterval","value":10.583005244258363},{"name":"borderColor0","value":4.795831523312719},{"name":"gap","value":6.557438524302},{"name":"autoPlay","value":11.090536506409418},{"name":"showPlayBtn","value":5},{"name":"breadcrumb","value":10.908712114635714},{"name":"colorMappingBy","value":9.219544457292887},{"name":"id","value":4.242640687119285},{"name":"blurSize","value":9.219544457292887},{"name":"minOpacity","value":7.0710678118654755},{"name":"maxOpacity","value":7.3484692283495345},{"name":"prevIcon","value":3.4641016151377544},{"name":"children","value":4.58257569495584},{"name":"shape","value":9.899494936611665},{"name":"nextIcon","value":3.4641016151377544},{"name":"showNextBtn","value":4.123105625617661},{"name":"stopIcon","value":4.58257569495584},{"name":"visibleMin","value":9.1104335791443},{"name":"visualDimension","value":9.848857801796104},{"name":"colorSaturation","value":7.483314773547883},{"name":"colorAlpha","value":8.12403840463596},{"name":"emptyItemWidth","value":3.1622776601683795},{"name":"inactiveOpacity","value":2},{"name":"activeOpacity","value":2},{"name":"showPrevBtn","value":4.358898943540674},{"name":"playIcon","value":5.0990195135927845},{"name":"ellipsis","value":4.358898943540674},{"name":"gapWidth","value":4.358898943540674},{"name":"borderColorSaturation","value":3.1622776601683795},{"name":"handleIcon","value":1.4142135623730951},{"name":"handleStyle","value":2.449489742783178},{"name":"borderType","value":1},{"name":"constantSpeed","value":1},{"name":"polyline","value":1.4142135623730951},{"name":"blendMode","value":1},{"name":"dataBackground","value":1},{"name":"textAlign","value":1},{"name":"textBaseline","value":1},{"name":"brush","value":1.7320508075688772}],
                        data: []
                    }
                },

                upList: [],

                downList: [],

                themeScatterOption: {
                    legend: _.extend({}, Chart.legend, {
                        y: 'top',
                        data: ['南海问题', '每日关注', '货币战争', '网易新闻', '阿里影业'],
                        textStyle: {
                            //color: '#fff',
//                            fontSize: 16
                        }
                    }),
                    tooltip: _.extend({}, Chart.tooltip, {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross'
                        },
                        formatter: function (obj) {
                            var value = obj.value;
                            return '<div style="border-bottom: 1px solid rgba(255,255,255,.3); font-size: 18px;padding-bottom: 7px;margin-bottom: 7px">'
                                    + obj.seriesName
                                    + '</div>'
                                    + '转发数：' + value[1] + '<br>'
                                    + '点赞数：' + value[2] + '<br>'
                                    + '评论数：' + value[5] + '<br>';
                        }
                    }),
                    textStyle: _.extend({}, Chart.textStyle),
                    visualMap: [
                        {
                            right: '0%',
                            top: '10%',
                            dimension: 2,
                            min: 0,
                            max: 300,
                            itemWidth: 30,
                            itemHeight: 120,
                            calculable: true,
                            precision: 0.1,
                            text: ['圆形大小：文章转发数'],
                            textGap: 30,
//                            textStyle: {
//                                color: '#fff'
//                            },
                            inRange: {
                                symbolSize: [10, 70]
                            },
                            outOfRange: {
                                symbolSize: [10, 70],
                                color: ['rgba(50,50,50,.2)']
                            },
                            controller: {
                                inRange: {
                                    color: ['#aeaeae']
                                },
                                outOfRange: {
                                    color: ['#444']
                                }
                            }
                        }
                    ],
                    grid: _.extend({}, Chart.grid, {
                        right: '10%'
                    }),
                    xAxis:  _.extend({}, Chart.xAxis, {
                        type : 'category',  //category
                        data : ["2016-08-21:12","2016-08-21:14","2016-08-21:15","2016-08-21:16","2016-08-21:17","2016-08-21:18","2016-08-21:20","2016-08-21:22","2016-08-22:00","2016-08-22:03","2016-08-22:05","2016-08-22:06","2016-08-22:08","2016-08-22:09","2016-08-22:10","2016-08-22:11","2016-08-22:12","2016-08-22:13","2016-08-22:14","2016-08-22:15","2016-08-22:16","2016-08-22:17","2016-08-22:18","2016-08-22:19","2016-08-22:20","2016-08-22:21","2016-08-22:22","2016-08-23:00","2016-08-23:03","2016-08-23:06","2016-08-23:08","2016-08-23:09","2016-08-23:10","2016-08-23:11","2016-08-23:12","2016-08-23:13","2016-08-23:14","2016-08-23:15","2016-08-23:16","2016-08-23:17","2016-08-23:18","2016-08-23:19","2016-08-23:20","2016-08-23:22","2016-08-23:23","2016-08-24:00","2016-08-24:01","2016-08-24:06","2016-08-24:07","2016-08-24:08","2016-08-24:09","2016-08-24:10","2016-08-24:11","2016-08-24:12","2016-08-24:14","2016-08-24:15","2016-08-24:16","2016-08-24:17","2016-08-24:18","2016-08-24:20","2016-08-24:21","2016-08-24:22","2016-08-25:00","2016-08-25:02","2016-08-25:03","2016-08-25:05","2016-08-25:06","2016-08-25:07","2016-08-25:08","2016-08-25:09","2016-08-25:10","2016-08-25:11","2016-08-25:12","2016-08-25:14","2016-08-25:15","2016-08-25:16","2016-08-25:17","2016-08-25:18","2016-08-25:19","2016-08-25:20","2016-08-25:21","2016-08-25:22","2016-08-25:23","2016-08-26:00","2016-08-26:01","2016-08-26:06","2016-08-26:07","2016-08-26:08","2016-08-26:09","2016-08-26:10","2016-08-26:11","2016-08-26:12","2016-08-26:13","2016-08-26:14","2016-08-26:15","2016-08-26:16","2016-08-26:17","2016-08-26:18","2016-08-26:22","2016-08-26:23","2016-08-27:00","2016-08-27:01","2016-08-27:02","2016-08-27:06","2016-08-27:08","2016-08-27:09","2016-08-27:10","2016-08-27:11","2016-08-27:12","2016-08-27:13","2016-08-27:14","2016-08-27:15","2016-08-27:16","2016-08-27:17","2016-08-27:18","2016-08-27:19","2016-08-27:20","2016-08-28:00","2016-08-28:01","2016-08-28:06","2016-08-28:08"],
                        //type: 'value',
                        name: '日期',
                        nameGap: 16,
                        nameTextStyle: {
                            fontSize: 14
                        },
                        max: 31,
                        splitLine: {
                            show: false
                        },
//                        axisLine: {
//                            lineStyle: {
//                                color: '#eee'
//                            }
//                        }
                    }),
                    yAxis: _.extend({}, Chart.yAxis, {
                        type: 'value',
                        name: '文章数量',
                        nameLocation: 'end',
                        nameGap: 20,
                        splitLine: {
                            show: false
                        }
                    }),
                    series: [
                        {
                            name: '南海问题',
                            type: 'scatter',
                            itemStyle: {
                                normal: {
                                    opacity: 0.8,
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowOffsetY: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.3)'
                                }
                            },
                            data: themeScatterData.dataBJ
                        }, {
                            name: '每日关注',
                            type: 'scatter',
                            itemStyle: {
                                normal: {
                                    opacity: 0.8,
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowOffsetY: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.3)'
                                }
                            },
                            data: themeScatterData.dataSH
                        }, {
                            name: '货币战争',
                            type: 'scatter',
                            itemStyle: {
                                normal: {
                                    opacity: 0.8,
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowOffsetY: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.3)'
                                }
                            },
                            data: themeScatterData.dataGZ
                        },{
                            name: '网易新闻',
                            type: 'scatter',
                            itemStyle: {
                                normal: {
                                    opacity: 0.8,
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowOffsetY: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.3)'
                                }
                            },
                            data: themeScatterData.dataWeb
                        }, {
                            name: '阿里影业',
                            type: 'scatter',
                            itemStyle: {
                                normal: {
                                    opacity: 0.8,
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowOffsetY: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.3)'
                                }
                            },
                            data: themeScatterData.dataClient
                        }
                    ]
                },
                themeScatterLoading: false,

                themeBestOption: {
                    title: _.extend({}, Chart.title, {text: words.topics, left: 10, top: 20}),
                    tooltip: _.extend({}, Chart.tooltip),
//                    legend: {
//                        data: ['话题排行']
//                    },
                    grid: _.extend({}, Chart.grid),
                    textStyle: _.extend({}, Chart.textStyle),
                    xAxis: _.extend({}, Chart.xAxis, { type: 'value' }),
                    yAxis: _.extend({}, Chart.yAxis, {
                        type: 'category',
                        data: []
                    }),
                    series: [
                        {
                            name: words.topics,
                            type: 'bar',
                            stack: 'Total',
                            itemStyle: {
                                normal: {
                                    color: function(params){
                                        let colorList = _.extend([], Chart.color3).reverse();
                                        if(colorList.length < 20){
                                            colorList = colorList.concat(colorList);
                                        }
                                        return colorList[params.dataIndex]
                                    }
                                }
                            },
                            label: {
                                normal: {
                                    show: true,
                                    position: 'insideRight',
                                    textStyle: {fontWeight: 'lighter', fontSize: 10},
                                    lineHeight: 12
                                }
                            },
                            data: []
                        }
                    ]
                },
                themeBestLoading: true,

                themeLineOption: {
                    title: _.extend({}, Chart.title, { show: false}),
                    tooltip: _.extend({}, Chart.tooltip, {
                        axisPointer : {
                            type : 'line'
                        }
                    }),
                    //color: _.extend([], Chart.color),
                    //backgroundColor: '#f9f9f9',
                    legend: {
                        data:[]
                    },
                    dataZoom: _.extend({}, Chart.dataZoom),
                    grid: _.extend({}, Chart.grid, {
                        bottom: '40rem',
                    }),
                    toolbox: _.extend({}, Chart.toolbox, {
                        feature: {
                            saveAsImage: {}
                        }
                    }),
                    xAxis: _.extend({}, Chart.xAxis, {
                        type : 'category',  //category
                        data : ["2016-08-21:12","2016-08-21:14","2016-08-21:15","2016-08-21:16","2016-08-21:17","2016-08-21:18","2016-08-21:20","2016-08-21:21","2016-08-22:00","2016-08-22:03","2016-08-22:05","2016-08-22:06","2016-08-22:08","2016-08-22:09","2016-08-22:10","2016-08-22:11","2016-08-22:12","2016-08-22:13","2016-08-22:14","2016-08-22:15","2016-08-22:16","2016-08-22:17","2016-08-22:18","2016-08-22:19","2016-08-22:20","2016-08-22:21","2016-08-22:22","2016-08-23:00","2016-08-23:03","2016-08-23:06","2016-08-23:08","2016-08-23:09","2016-08-23:10","2016-08-23:11","2016-08-23:12","2016-08-23:13","2016-08-23:14","2016-08-23:15","2016-08-23:16","2016-08-23:17","2016-08-23:18","2016-08-23:19","2016-08-23:20","2016-08-23:22","2016-08-23:23","2016-08-24:00","2016-08-24:01","2016-08-24:06","2016-08-24:07","2016-08-24:08","2016-08-24:09","2016-08-24:10","2016-08-24:11","2016-08-24:12","2016-08-24:14","2016-08-24:15","2016-08-24:16","2016-08-24:17","2016-08-24:18","2016-08-24:20","2016-08-24:21","2016-08-24:22","2016-08-25:00","2016-08-25:02","2016-08-25:03","2016-08-25:05","2016-08-25:06","2016-08-25:07","2016-08-25:08","2016-08-25:09","2016-08-25:10","2016-08-25:11","2016-08-25:12","2016-08-25:14","2016-08-25:15","2016-08-25:16","2016-08-25:17","2016-08-25:18","2016-08-25:19","2016-08-25:20","2016-08-25:21","2016-08-25:22","2016-08-25:23","2016-08-26:00","2016-08-26:01","2016-08-26:06","2016-08-26:07","2016-08-26:08","2016-08-26:09","2016-08-26:10","2016-08-26:11","2016-08-26:12","2016-08-26:13","2016-08-26:14","2016-08-26:15","2016-08-26:16","2016-08-26:17","2016-08-26:18","2016-08-26:22","2016-08-26:23","2016-08-27:00","2016-08-27:01","2016-08-27:02","2016-08-27:06","2016-08-27:08","2016-08-27:09","2016-08-27:10","2016-08-27:11","2016-08-27:12","2016-08-27:13","2016-08-27:14","2016-08-27:15","2016-08-27:16","2016-08-27:17","2016-08-27:18","2016-08-27:19","2016-08-27:20","2016-08-28:00","2016-08-28:01","2016-08-28:06","2016-08-28:08"],
                        boundaryGap : false
                    }),
                    yAxis: _.extend({}, Chart.yAxis, {
                        type : 'value',
                        boundaryGap : false
                    }),
                    progressive: 4,
                    textStyle: Chart.textStyle,
                    series : []
                },
                themeLineLoading: true
            }
        },
        methods: {
            clickAction(e){
                console.log(e);
                alert(e.name + ": " + e.value);
            },
            getTrendList(){
                return Api.getTrendList({}).then(resp => {
                    //console.log('getTrendList', resp);
                    if(resp.data.code == 0){
                        this.upList = resp.data.data.up;
                        this.downList = resp.data.data.down;
                    }
                });
            },
            getWordCloud(){
                const subtopic = this.data.subtopic,
                    source = this.data.source,
                    time_dimension = this.data.time_dimension,
                    time_interval = this.data.time_interval,
                    topic = this.data.topic;
                return Api.getWordCloud({}).then(resp => {
                    //console.log('getWordCloud',resp);
                    if(resp.data.code == 0){
                        this.themeWordLoading = false;
                        this.themeWordOption.series.data = resp.data.data;
                    }
                });
            },
            getThemeBest(){
                return Api.getThemeBest({}).then(resp => {
                    //console.log('getThemeBest',resp);
                    if(resp.data.code == 0){
                        const bestList = _.sortBy(resp.data.data, 'value');
                        const yAxis = _.map(bestList, value => value.name);
                        const data = _.map(bestList, value => value.value);
                        this.themeBestLoading = false;
                        this.themeBestOption.yAxis.data = yAxis;
                        this.themeBestOption.series[0].data = data;
                    }
                });
            },
            getThemeDetail(){
                Api.getThemeDetail({}).then(resp => {
                    //console.log('getThemeDetail', resp.data);
                    if(resp.data.code == 0){
                        const details = resp.data.data;
                        this.themeLineLoading = false;
                        this.themeLineOption.xAxis.data = _.map(details, detail => detail.date);
                        this.themeLineOption.legend.data = _.map(details[0].values, item => item.name);
                        this.themeLineOption.series = _.map(this.themeLineOption.legend.data, legend => {
                            const data = _.chain(details)
                                    .map(detail => (_.filter(detail.values, value => (value.name == legend))[0]))
                                    .map(item => item.value).value();
                            return ({
                                name: legend,
                                type:'line',
                                data
                            });
                        });
                    }
                });
            },
            init(){
                this.getTrendList();
                this.getWordCloud();
                this.getThemeBest();
                this.getThemeDetail();
            }
        },
        created(){
//            this.markImage.onload = function () {
//                const option = this.themeWordOption.maskImage;
//                this.themeWordOption.maskImage = this.maskImage;
//            }
//            this.markImage.src = "../../../images/search.png";
        },
        components:{
            Tabs
        },
        ready(){
            this.init();
        }
    }
</script>
